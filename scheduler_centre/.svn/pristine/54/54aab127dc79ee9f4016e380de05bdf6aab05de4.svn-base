<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="SCHE_ALARM" >
  <resultMap id="ScheAlarmResult" class="com.banggo.scheduler.dao.dataobject.ScheAlarm" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Nov 15 14:34:17 CST 2012.
    -->
    <result column="ID" property="id" jdbcType="INTEGER" />
    <result column="SCHE_JOB_ID" property="scheJobId" jdbcType="INTEGER" />
    <result column="FREQUENCY" property="frequency" jdbcType="INTEGER" />
    <result column="FREQUENCY_UNIT" property="frequencyUnit" jdbcType="CHAR" />
    <result column="STATUS" property="status" jdbcType="INTEGER" />
    <result column="ACCEPT_ALARM_BEGIN" property="acceptAlarmBegin" jdbcType="TIME" />
    <result column="ACCEPT_ALARM_END" property="acceptAlarmEnd" jdbcType="TIME" />
    <result column="SCHE_USER_GROUP_ID" property="scheUserGroupId" jdbcType="INTEGER" />
    <result column="CREATE_DATE" property="createDate" jdbcType="DATETIME" />
    <result column="CREATE_BY" property="createBy" jdbcType="VARCHAR" />
    <result column="UPDATE_DATE" property="updateDate" jdbcType="DATETIME" />
    <result column="UPDATE_BY" property="updateBy" jdbcType="VARCHAR" />
    <result column="ALARM_METHOD" property="alarmMethod" jdbcType="INTEGER" />
  </resultMap>
  
  <resultMap id="ScheAlarmMoreResult" class="com.banggo.scheduler.dao.dataobject.ScheAlarmMore" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Nov 15 14:34:17 CST 2012.
    -->
    <result column="ID" property="id" jdbcType="INTEGER" />
    <result column="SCHE_JOB_ID" property="scheJobId" jdbcType="INTEGER" />
    <result column="FREQUENCY" property="frequency" jdbcType="INTEGER" />
    <result column="FREQUENCY_UNIT" property="frequencyUnit" jdbcType="CHAR" />
    <result column="STATUS" property="status" jdbcType="INTEGER" />
    <result column="ACCEPT_ALARM_BEGIN" property="acceptAlarmBegin" jdbcType="TIME" />
    <result column="ACCEPT_ALARM_END" property="acceptAlarmEnd" jdbcType="TIME" />
    <result column="SCHE_USER_GROUP_ID" property="scheUserGroupId" jdbcType="INTEGER" />
    <result column="CREATE_DATE" property="createDate" jdbcType="DATETIME" />
    <result column="CREATE_BY" property="createBy" jdbcType="VARCHAR" />
    <result column="UPDATE_DATE" property="updateDate" jdbcType="DATETIME" />
    <result column="UPDATE_BY" property="updateBy" jdbcType="VARCHAR" />
    <result column="ALARM_METHOD" property="alarmMethod" jdbcType="INTEGER" />
    <result column="jobName" property="jobName" jdbcType="VARCHAR" />
    <result column="groupName" property="groupName" jdbcType="VARCHAR" />
  </resultMap>
  <select id="selectByPrimaryKey" resultMap="ScheAlarmResult" parameterClass="com.banggo.scheduler.dao.dataobject.ScheAlarm" >
    select ID, SCHE_JOB_ID, FREQUENCY, FREQUENCY_UNIT, STATUS, ACCEPT_ALARM_BEGIN, ACCEPT_ALARM_END,
      SCHE_USER_GROUP_ID, CREATE_DATE, CREATE_BY, UPDATE_DATE, UPDATE_BY, ALARM_METHOD
    from SCHE_ALARM
    where ID = #id:INTEGER#
  </select>
  <delete id="deleteByPrimaryKey" parameterClass="com.banggo.scheduler.dao.dataobject.ScheAlarm" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Nov 15 14:34:17 CST 2012.
    -->
    delete from SCHE_ALARM
    where ID = #id:INTEGER#
  </delete>
  <insert id="insert" parameterClass="com.banggo.scheduler.dao.dataobject.ScheAlarm" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Nov 15 14:34:17 CST 2012.
    -->
    insert into SCHE_ALARM (ID, SCHE_JOB_ID, FREQUENCY, FREQUENCY_UNIT, ALARM_METHOD, STATUS, ACCEPT_ALARM_BEGIN,
      ACCEPT_ALARM_END, SCHE_USER_GROUP_ID, CREATE_DATE, CREATE_BY, UPDATE_DATE, UPDATE_BY)
    values (#id:INTEGER#, #scheJobId:INTEGER#, #frequency:INTEGER#, #frequencyUnit:CHAR#, #alarmMethod:INTEGER#,
      #status:INTEGER#, #acceptAlarmBegin:TIME#, #acceptAlarmEnd:TIME#, #scheUserGroupId:INTEGER#,
      #createDate:DATETIME#, #createBy:VARCHAR#, #updateDate:DATETIME#, #updateBy:VARCHAR#)
  </insert>
  <update id="updateByPrimaryKey" parameterClass="com.banggo.scheduler.dao.dataobject.ScheAlarm" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Nov 15 14:34:17 CST 2012.
    -->
    update SCHE_ALARM
    set SCHE_JOB_ID = #scheJobId:INTEGER#,
      FREQUENCY = #frequency:INTEGER#,
      FREQUENCY_UNIT = #frequencyUnit:CHAR#,
      ALARM_METHOD = #alarmMethod:INTEGER#,
      STATUS = #status:INTEGER#,
      ACCEPT_ALARM_BEGIN = #acceptAlarmBegin:TIME#,
      ACCEPT_ALARM_END = #acceptAlarmEnd:TIME#,
      SCHE_USER_GROUP_ID = #scheUserGroupId:INTEGER#,
      CREATE_DATE = #createDate:DATETIME#,
      CREATE_BY = #createBy:VARCHAR#,
      UPDATE_DATE = #updateDate:DATETIME#,
      UPDATE_BY = #updateBy:VARCHAR#
    where ID = #id:INTEGER#
  </update>
  <update id="updateByPrimaryKeySelective" parameterClass="com.banggo.scheduler.dao.dataobject.ScheAlarm" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Nov 15 14:34:17 CST 2012.
    -->
    update SCHE_ALARM
    <dynamic prepend="set" >
      <isNotNull prepend="," property="scheJobId" >
        SCHE_JOB_ID = #scheJobId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="frequency" >
        FREQUENCY = #frequency:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="frequencyUnit" >
        FREQUENCY_UNIT = #frequencyUnit:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="status" >
        STATUS = #status:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="alarmMethod" >
        ALARM_METHOD = #alarmMethod:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="acceptAlarmBegin" >
        ACCEPT_ALARM_BEGIN = #acceptAlarmBegin:TIME#
      </isNotNull>
      <isNotNull prepend="," property="acceptAlarmEnd" >
        ACCEPT_ALARM_END = #acceptAlarmEnd:TIME#
      </isNotNull>
      <isNotNull prepend="," property="scheUserGroupId" >
        SCHE_USER_GROUP_ID = #scheUserGroupId:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="createDate" >
        CREATE_DATE = #createDate:DATETIME#
      </isNotNull>
      <isNotNull prepend="," property="createBy" >
        CREATE_BY = #createBy:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="updateDate" >
        UPDATE_DATE = #updateDate:DATETIME#
      </isNotNull>
      <isNotNull prepend="," property="updateBy" >
        UPDATE_BY = #updateBy:VARCHAR#
      </isNotNull>
    </dynamic>
    where ID = #id:INTEGER#
  </update>
  
  <select id="selectList" resultMap="ScheAlarmMoreResult" parameterClass="map" >
    select a.*, j.JOB_NAME jobName, u.NAME groupName
    from SCHE_ALARM a left join SCHE_JOB j on (a.SCHE_JOB_ID = j.ID)
    left join SCHE_USER_GROUP u on (a.SCHE_USER_GROUP_ID = u.ID)
    where 1 = 1
    
		<isNotNull prepend=" and " property="appName">
			j.APP_NAME = #appName#
		</isNotNull>
		<isNotNull prepend=" and " property="jobName">
			j.JOB_NAME like '%$jobName$%'
		</isNotNull>
		<isNotNull prepend=" and " property="jobGroup">
			j.JOB_GROUP like '%$jobGroup$%'
		</isNotNull>
		<isNotNull prepend=" and " property="jobId">
			j.ID = #jobId#
		</isNotNull>
		<isNotNull prepend=" and " property="status">
			a.STATUS = #status#
		</isNotNull>
    
     order by a.CREATE_DATE desc
		 
		<isNotNull prepend="  " property="pageSize">
			<isNotNull prepend="  " property="skip">
				LIMIT #skip#,#pageSize#
			</isNotNull>
		</isNotNull>
  </select>
  
    <select id="select" resultMap="ScheAlarmResult" parameterClass="map" >
    select a.*
    from SCHE_ALARM a left join SCHE_JOB j on (a.SCHE_JOB_ID = j.ID)
    where 1 = 1
    
		<isNotNull prepend=" and " property="appName">
			j.APP_NAME = #appName#
		</isNotNull>
		<isNotNull prepend=" and " property="jobName">
			j.JOB_NAME = #jobName#
		</isNotNull>
		<isNotNull prepend=" and " property="jobGroup">
			j.JOB_GROUP = #jobGroup#
		</isNotNull>
		<isNotNull prepend=" and " property="jobId">
			j.ID = #jobId#
		</isNotNull>
		<isNotNull prepend=" and " property="status">
			a.STATUS = #status#
		</isNotNull>
		
    
     order by a.CREATE_DATE desc
		 
		<isNotNull prepend="  " property="pageSize">
			<isNotNull prepend="  " property="skip">
				LIMIT #skip#,#pageSize#
			</isNotNull>
		</isNotNull>
  </select>
  
   <select id="count" resultClass="int" parameterClass="map" >
    select count(1)
    from SCHE_ALARM a left join SCHE_JOB j on (a.SCHE_JOB_ID = j.ID)
    where 1 = 1
    
		<isNotNull prepend=" and " property="appName">
			j.APP_NAME = #appName#
		</isNotNull>
		<isNotNull prepend=" and " property="jobName">
			j.JOB_NAME = #jobName#
		</isNotNull>
		<isNotNull prepend=" and " property="jobGroup">
			j.JOB_GROUP = #jobGroup#
		</isNotNull>
		<isNotNull prepend=" and " property="jobId">
			j.ID = #jobId#
		</isNotNull>
		<isNotNull prepend=" and " property="status">
			a.STATUS = #status#
		</isNotNull>
    
  </select>
  
</sqlMap>